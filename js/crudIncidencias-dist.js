function createUser(e,t){firebase.auth().createUserWithEmailAndPassword(e,t).then((e=>{var t=e.user;console.info(`Usuario creado correctamente ${t}`)})).catch((e=>{var t=e.code,a=e.message;alert(`Error ${t} - ${a}`)}))}$(document).ready((function(){let e;const t=firebase.database();coleccionIncidencias=t.ref().child("incidentes");var a=[],n=$("#tablaIncidencias").DataTable({language:{decimal:"",emptyTable:"No hay información",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ Entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}},data:a,columnDefs:[{targets:[0,4],visible:!1},{targets:-1,defaultContent:'<div class=\'wrapper text-center\'><div class=\'btn-group\'><button class=\'btnDetalle btn btn-warning\' data-toggle=\'tooltip\' title=\'Ver Detalle\'><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="M15 11h7v2h-7zm1 4h6v2h-6zm-2-8h8v2h-8zM4 19h10v-1c0-2.757-2.243-5-5-5H7c-2.757 0-5 2.243-5 5v1h2zm4-7c1.995 0 3.5-1.505 3.5-3.5S9.995 5 8 5 4.5 6.505 4.5 8.5 6.005 12 8 12z"></path></svg></button><button class=\'btnBorrar btn btn-danger\' data-toggle=\'tooltip\' title=\'Borrar\'><svg class="bi bi-trash" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></button></div></div>'}],dom:"Blfrtip",pageLength:5,lengthMenu:[[5,10,20,-1],[5,10,20,"Todos"]],buttons:{dom:{button:{className:"btn"}},buttons:[{extend:"excelHtml5",title:"Reporte de Alertas - Municipalidad de Chicama",text:'<i class="fas fa-file-excel icono-excel"></i>',titleAttr:"Exportar a Excel",className:"btn btn-success excelButton",messageBottom:"Alcalde Julio Pérez Cabrera.",exportOptions:{columns:[1,2,3]},excelStyles:[{template:["blue_medium","header_blue","title_medium"]},{cells:"1",style:{font:{size:"14",b:!0}}},{cells:"2",style:{font:{size:"12",b:!0},alignment:{vertical:"center",horizontal:"center"}}},{cells:"3:",style:{font:{size:"11",b:!1},alignment:{vertical:"center",horizontal:"center"}}},{cells:"-0",style:{font:{size:"10",b:!0,lineHeight:2},alignment:{vertical:"center",horizontal:"right"}}}],pageStyle:{sheetPr:{pageSetUpPr:{fitToPage:1}},printOptions:{horizontalCentered:!0,verticalCentered:!0},pageSetup:{paperSize:"9",fitToWidth:"1",fitToHeight:"0"},pageMargins:{left:"0.2",right:"0.2",top:"0.4",bottom:"0.4",header:"0",footer:"0"},repeatHeading:!0,repeatCol:"A:A"}},{extend:"pdfHtml5",customize:function(e){e.content[1].margin=[120,0,100,0],e.content[2].margin=[120,30,100,0]},text:'<i class="fas fa-file-pdf icono-pdf"></i>',titleAttr:"Exportar a PDF",title:"Reporte de Alertas de Aplicación de Alertas - Municipalidad de Chicama",className:"btn btn-danger",footer:!0,pageSize:"A4",lengthChange:!1,messageBottom:{text:"Alcalde Julio Pérez Cabrera.",alignment:{vertical:"center",horizontal:"right"}},exportOptions:{columns:[1,2,3],modifier:{page:"current"}}}]}});coleccionIncidencias.on("child_added",(e=>{a=[e.key,e.child("titulo").val(),e.child("fecha").val(),e.child("hora").val(),e.child("imagen").val()],n.rows.add([a]).draw()})),coleccionIncidencias.on("child_removed",(function(){n.row(e.parents("tr")).remove().draw()})),$("#tablaIncidencias").on("click",".btnBorrar",(function(){e=$(this),Swal.fire({title:"¿Está seguro de eliminar esta alerta?",text:"¡Está operación no se puede revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Eliminar"}).then((e=>{if(e.value){let e=$("#tablaIncidencias").dataTable().fnGetData($(this).closest("tr"));banderaEliminado=!0,cont2+=10;let a=e[4];if("imagen"!==a)firebase.storage().ref(a).delete().then((function(){})).catch((function(e){console.log(e)}));let n=e[0];t.ref(`incidentes/${n}`).remove(),Swal.fire("¡Eliminado!","La alerta ha sido eliminada.","success")}}))}));firebase.database();$("#tablaIncidencias").on("click",".btnDetalle",(function(){filaSeleccionada=$(this),tablaIncidencias.classList.add("d-none"),alertsDetails.classList.remove("d-none"),mapAlerts.classList.remove("d-none");let e=$("#tablaIncidencias").dataTable().fnGetData($(this).closest("tr"))[0];loadIncidentDetail(e)}))}));